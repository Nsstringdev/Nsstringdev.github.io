# 桌遊「心算大師」中，遊戲無解的機率有多少
---
## 一、前言
在心算大師的每一次遊戲循環中，都有數個不同的解可以找到。至於到底需要多少個不同的數字是這種遊戲的最小極限，是本次程式模擬練習中探討的目的。

規則如下：

>從牌堆翻開5張卡牌，並投擲2顆骰子。（可選擇不同骰子來調整難易度）

>所有玩家同時進行，運用加、減、乘、除四大魔法，讓牌的數字組合等於骰子的數字總合。

>有玩家宣布有答案時，所有玩家停止運算，由宣布的玩家展示運算過程，其他玩家驗證是否正確。

>⊙運算正確──宣布的玩家施展魔法成功，獲得這次使用的牌。

>⊙運算錯誤──宣布的玩家施展魔法失敗，其他玩家從翻開的牌中各自拿取1張牌。

>玩家獲得的牌放在自己面前作為計分。

>每次有玩家宣布答案時，不論正確與否都會將翻開的牌補至5張。

>如果沒有玩家有答案，則再翻開1張牌，並重新投擲骰子。

>當牌堆的牌不夠將桌面的牌補至5張時，遊戲結束。面前最多牌的玩家獲勝。

擷取自：
>https://2plus.com.tw/product/q907-mix-match/

## 二、方法
將每次遊戲分成出題與解題兩種函數類型。

出題函數：
1. 取x個1~max大小的正整數；
    makeSomeInts(x, max);
2. 取一個1~max大小的整數為答案；
    makeTargetNumber(max);
    
解題函數：
1. 處理單局遊戲的遞迴函數，target為目標數字、array為未處理數列、tempSeq是已經處理的數列、answer作為全域變數儲存答案數列；
    let answer;
    game(target, array, tempSeq);
2. 處理多次測試的測試函數，取x個1~max的數字，以target為答案，做t次。

## 三、結果
用以下程序，顯示出成功機率：
>let times = 1000;

>console.log(test( times, 5, 20, 50)+'/'+times.toString());

以1000次遊戲，每局五個數字，數字最大20，答案數字最大50為例，可以得到至少970/1000成功機率的比例。

當然，數字卡片的數量與數字比例可以調整，只是在五個題目數字以上機率都幾乎99%以上，整體比例數字就不詳列。

筆者嘗試列出4~6個題目數字的成功率如下：
4: 約700/1000(670~730)
5: 約97X/1000
6及以上: 1000/1000

## 四、心得

原本以為需要進行更詳盡的數字比例實驗，沒想到五個數字基本上可以在97%成功率的狀況下，湊出幾乎是任何目標數字。筆者第一次體驗的時候是有八張題目數字卡牌，雖有重複數字，但可能性多了不少。

有趣的是，為了能讓各個年齡層都體會到運算的樂趣，題目數量卡牌可以自行調整，俗稱村規。

四張卡牌是只有7成機率有解的困難模式。

五張卡牌大概就是年輕人可以競技的程度。

八張數字卡牌是年輕人需要先閉上可愛的嘴巴，讓老年人及小朋友可以有多一點時間運算的難度。

十張卡牌就可以拿來教小朋友如何四則運算。

進可攻退可守的難度變化是本遊戲最大的樂趣，希望大家都能體會本遊戲的精妙之處。
